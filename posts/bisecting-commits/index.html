<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Bisecting Commits | </title><meta name=keywords content><meta name=description content="Every once in a while I encounter a reason to use my favourite Git command, git bisect.
Problem Space
Say we have a repository with a few commits in it, containing a simple file.py script with some functions in it:
~/c/showcase> git log
475a134 (HEAD -> master) fix: call the `main` function
bafdb17 feat: add some basic functionality
a1f3745 feat: define `divide` function
0d84ce9 feat: define `multiply` function
676689d chore: no-op refactoring
e94ec21 feat: define `subtract` function
de5d193 feat: define `add` function
0c0dd22 chore: initial commit
At some point, one of the commits broke the subtract function. We don&rsquo;t know which one it was, but we have a separate file that uses it called harness.py:"><meta name=author content><link rel=canonical href=https://alexander-jackson.github.io/posts/bisecting-commits/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://alexander-jackson.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alexander-jackson.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alexander-jackson.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://alexander-jackson.github.io/apple-touch-icon.png><link rel=mask-icon href=https://alexander-jackson.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://alexander-jackson.github.io/posts/bisecting-commits/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://alexander-jackson.github.io/posts/bisecting-commits/"><meta property="og:title" content="Bisecting Commits"><meta property="og:description" content="Every once in a while I encounter a reason to use my favourite Git command, git bisect.
Problem Space Say we have a repository with a few commits in it, containing a simple file.py script with some functions in it:
~/c/showcase> git log 475a134 (HEAD -> master) fix: call the `main` function bafdb17 feat: add some basic functionality a1f3745 feat: define `divide` function 0d84ce9 feat: define `multiply` function 676689d chore: no-op refactoring e94ec21 feat: define `subtract` function de5d193 feat: define `add` function 0c0dd22 chore: initial commit At some point, one of the commits broke the subtract function. We don’t know which one it was, but we have a separate file that uses it called harness.py:"><meta property="og:locale" content="en-gb"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-02T16:01:34+01:00"><meta property="article:modified_time" content="2025-05-02T16:01:34+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bisecting Commits"><meta name=twitter:description content="Every once in a while I encounter a reason to use my favourite Git command, git bisect.
Problem Space
Say we have a repository with a few commits in it, containing a simple file.py script with some functions in it:
~/c/showcase> git log
475a134 (HEAD -> master) fix: call the `main` function
bafdb17 feat: add some basic functionality
a1f3745 feat: define `divide` function
0d84ce9 feat: define `multiply` function
676689d chore: no-op refactoring
e94ec21 feat: define `subtract` function
de5d193 feat: define `add` function
0c0dd22 chore: initial commit
At some point, one of the commits broke the subtract function. We don&rsquo;t know which one it was, but we have a separate file that uses it called harness.py:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alexander-jackson.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Bisecting Commits","item":"https://alexander-jackson.github.io/posts/bisecting-commits/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Bisecting Commits","name":"Bisecting Commits","description":"Every once in a while I encounter a reason to use my favourite Git command, git bisect.\nProblem Space Say we have a repository with a few commits in it, containing a simple file.py script with some functions in it:\n~/c/showcase\u0026gt; git log 475a134 (HEAD -\u0026gt; master) fix: call the `main` function bafdb17 feat: add some basic functionality a1f3745 feat: define `divide` function 0d84ce9 feat: define `multiply` function 676689d chore: no-op refactoring e94ec21 feat: define `subtract` function de5d193 feat: define `add` function 0c0dd22 chore: initial commit At some point, one of the commits broke the subtract function. We don\u0026rsquo;t know which one it was, but we have a separate file that uses it called harness.py:\n","keywords":[],"articleBody":"Every once in a while I encounter a reason to use my favourite Git command, git bisect.\nProblem Space Say we have a repository with a few commits in it, containing a simple file.py script with some functions in it:\n~/c/showcase\u003e git log 475a134 (HEAD -\u003e master) fix: call the `main` function bafdb17 feat: add some basic functionality a1f3745 feat: define `divide` function 0d84ce9 feat: define `multiply` function 676689d chore: no-op refactoring e94ec21 feat: define `subtract` function de5d193 feat: define `add` function 0c0dd22 chore: initial commit At some point, one of the commits broke the subtract function. We don’t know which one it was, but we have a separate file that uses it called harness.py:\n#!/usr/bin/env python3 from file import subtract print(subtract(1, 1)) With master checked out, we can see that it returns the wrong result:\n~/c/showcase\u003e ./harness.py 2 Our first option is a sanity check, let’s ensure it worked at the start:\n~/c/showcase\u003e git checkout e94ec21 HEAD is now at e94ec21 feat: define `subtract` function ~/c/showcase\u003e ./harness.py 0 Okay good. We now have 2 commits, one where the behaviour is as we would expect and one where it is not. Since there’s a small number of commits we could start checking them one by one, but that wouldn’t work on larger repositories.\nBeginning a Bisection git bisect operates on the idea of binary search. We give it a good commit and a bad commit and it gives us a new commit to test in the middle. This reduces our search space significantly, since in each run we remove half of the remaining commits.\nTo get started, we run git bisect start:\n~/c/showcase\u003e git bisect start status: waiting for both good and bad commits This tells us that it needs a good and a bad commit before we can begin the search. Since we know these from before, we can provide them:\n~/c/showcase\u003e git bisect good e94ec21 status: waiting for bad commit, 1 good commit known ~/c/showcase\u003e git bisect bad 475a134 Bisecting: 2 revisions left to test after this (roughly 1 step) [0d84ce96e1f6c8903dd1ab3a3c96d972512beef1] feat: define `multiply` function Once we have provided both, it checks out a commit in the middle. We then run our test:\n~/c/showcase\u003e ./harness.py 2 Since this produces the wrong result, we feed that information back into git bisect:\n~/c/showcase\u003e git bisect bad Bisecting: 0 revisions left to test after this (roughly 0 steps) [676689dbe7c216443317997992aed2ff0b024847] chore: no-op refactoring Again, it picks another commit for us to test:\n~/c/showcase\u003e ./harness.py 2 This also produces the wrong result, so we run git bisect bad again:\n~/c/showcase\u003e git bisect bad 676689dbe7c216443317997992aed2ff0b024847 is the first bad commit 676689dbe7c216443317997992aed2ff0b024847 (HEAD) chore: no-op refactoring file.py | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) There are no more commits to check, so this returns and tells us that 676689d (our supposed no-op refactoring) is the first bad commit.\nAs we can see from the changes, it’s quite obvious in this case:\n~/c/showcase\u003e git diff HEAD~ | cat diff --git a/file.py b/file.py index 9a35fcf..2dd699d 100644 --- a/file.py +++ b/file.py @@ -22,4 +22,4 @@ def subtract(a, b): Returns: int: The result of a - b. \"\"\" - return a - b + return a + b In busier repositories however it may be less obvious what caused the problem, and there may be far more commits to work through. git bisect provides a way of quickly trimming these down.\n","wordCount":"565","inLanguage":"en","datePublished":"2025-05-02T16:01:34+01:00","dateModified":"2025-05-02T16:01:34+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://alexander-jackson.github.io/posts/bisecting-commits/"},"publisher":{"@type":"Organization","name":"","logo":{"@type":"ImageObject","url":"https://alexander-jackson.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Bisecting Commits</h1><div class=post-meta><span title='2025-05-02 16:01:34 +0100 +0100'>May 2, 2025</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#problem-space aria-label="Problem Space">Problem Space</a></li><li><a href=#beginning-a-bisection aria-label="Beginning a Bisection">Beginning a Bisection</a></li></ul></div></details></div><div class=post-content><p>Every once in a while I encounter a reason to use my favourite Git command, <code>git bisect</code>.</p><h2 id=problem-space>Problem Space<a hidden class=anchor aria-hidden=true href=#problem-space>#</a></h2><p>Say we have a repository with a few commits in it, containing a simple <code>file.py</code> script with some functions in it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git log
</span></span><span style=display:flex><span>475a134 <span style=color:#f92672>(</span>HEAD -&gt; master<span style=color:#f92672>)</span> fix: call the <span style=color:#e6db74>`</span>main<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>bafdb17 feat: add some basic functionality
</span></span><span style=display:flex><span>a1f3745 feat: define <span style=color:#e6db74>`</span>divide<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>0d84ce9 feat: define <span style=color:#e6db74>`</span>multiply<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>676689d chore: no-op refactoring
</span></span><span style=display:flex><span>e94ec21 feat: define <span style=color:#e6db74>`</span>subtract<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>de5d193 feat: define <span style=color:#e6db74>`</span>add<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>0c0dd22 chore: initial commit
</span></span></code></pre></div><p>At some point, one of the commits broke the <code>subtract</code> function. We don&rsquo;t know which one it was, but we have a separate file that uses it called <code>harness.py</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> file <span style=color:#f92672>import</span> subtract
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(subtract(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>))
</span></span></code></pre></div><p>With <code>master</code> checked out, we can see that it returns the wrong result:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; ./harness.py
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>Our first option is a sanity check, let&rsquo;s ensure it worked at the start:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git checkout e94ec21
</span></span><span style=display:flex><span>HEAD is now at e94ec21 feat: define <span style=color:#e6db74>`</span>subtract<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~/c/showcase&gt; ./harness.py
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>Okay good. We now have 2 commits, one where the behaviour is as we would expect and one where it is not. Since there&rsquo;s a small number of commits we could start checking them one by one, but that wouldn&rsquo;t work on larger repositories.</p><h2 id=beginning-a-bisection>Beginning a Bisection<a hidden class=anchor aria-hidden=true href=#beginning-a-bisection>#</a></h2><p><code>git bisect</code> operates on the idea of binary search. We give it a good commit and a bad commit and it gives us a new commit to test in the middle. This reduces our search space significantly, since in each run we remove half of the remaining commits.</p><p>To get started, we run <code>git bisect start</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git bisect start
</span></span><span style=display:flex><span>status: waiting <span style=color:#66d9ef>for</span> both good and bad commits
</span></span></code></pre></div><p>This tells us that it needs a good and a bad commit before we can begin the search. Since we know these from before, we can provide them:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git bisect good e94ec21
</span></span><span style=display:flex><span>status: waiting <span style=color:#66d9ef>for</span> bad commit, <span style=color:#ae81ff>1</span> good commit known
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>~/c/showcase&gt; git bisect bad 475a134
</span></span><span style=display:flex><span>Bisecting: <span style=color:#ae81ff>2</span> revisions left to test after this <span style=color:#f92672>(</span>roughly <span style=color:#ae81ff>1</span> step<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>0d84ce96e1f6c8903dd1ab3a3c96d972512beef1<span style=color:#f92672>]</span> feat: define <span style=color:#e6db74>`</span>multiply<span style=color:#e6db74>`</span> <span style=color:#66d9ef>function</span>
</span></span></code></pre></div><p>Once we have provided both, it checks out a commit in the middle. We then run our test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; ./harness.py
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>Since this produces the wrong result, we feed that information back into <code>git bisect</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git bisect bad
</span></span><span style=display:flex><span>Bisecting: <span style=color:#ae81ff>0</span> revisions left to test after this <span style=color:#f92672>(</span>roughly <span style=color:#ae81ff>0</span> steps<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>676689dbe7c216443317997992aed2ff0b024847<span style=color:#f92672>]</span> chore: no-op refactoring
</span></span></code></pre></div><p>Again, it picks another commit for us to test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; ./harness.py
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>This also produces the wrong result, so we run <code>git bisect bad</code> again:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git bisect bad
</span></span><span style=display:flex><span>676689dbe7c216443317997992aed2ff0b024847 is the first bad commit
</span></span><span style=display:flex><span>676689dbe7c216443317997992aed2ff0b024847 <span style=color:#f92672>(</span>HEAD<span style=color:#f92672>)</span> chore: no-op refactoring
</span></span><span style=display:flex><span> file.py | <span style=color:#ae81ff>2</span> +-
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> file changed, <span style=color:#ae81ff>1</span> insertion<span style=color:#f92672>(</span>+<span style=color:#f92672>)</span>, <span style=color:#ae81ff>1</span> deletion<span style=color:#f92672>(</span>-<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>There are no more commits to check, so this returns and tells us that <code>676689d</code> (our supposed no-op refactoring) is the first bad commit.</p><p>As we can see from the changes, it&rsquo;s quite obvious in this case:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/c/showcase&gt; git diff HEAD~ | cat
</span></span><span style=display:flex><span>diff --git a/file.py b/file.py
</span></span><span style=display:flex><span>index 9a35fcf..2dd699d <span style=color:#ae81ff>100644</span>
</span></span><span style=display:flex><span>--- a/file.py
</span></span><span style=display:flex><span>+++ b/file.py
</span></span><span style=display:flex><span>@@ -22,4 +22,4 @@ def subtract<span style=color:#f92672>(</span>a, b<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>     Returns:
</span></span><span style=display:flex><span>     int: The result of a - b.
</span></span><span style=display:flex><span>     <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>-    return a - b
</span></span></span><span style=display:flex><span><span style=color:#e6db74>+    return a + b
</span></span></span></code></pre></div><p>In busier repositories however it may be less obvious what caused the problem, and there may be far more commits to work through. <code>git bisect</code> provides a way of quickly trimming these down.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://alexander-jackson.github.io/></a></span>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>